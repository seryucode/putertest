<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Puter Test</title>
</head>
<body>
  <h1>Puterテスト</h1>
  <button id="start">執筆開始</button>
  <pre id="output"></pre>

  <!-- Puterは body の一番最後 -->
  <script src="https://js.puter.com/v2/"></script>

  <script>
    window.addEventListener('load', () => {
      if (typeof puter === 'undefined') {
        document.getElementById('output').textContent =
          '❌ puter がロードされていない';
        return;
      }

      document.getElementById('start').onclick = async () => {
        document.getElementById('output').textContent = '執筆中…';

        const res = await puter.ai.chat({
          model: 'claude-3.5-sonnet',
          messages: [
            { role: 'user', content: '短い物語を書いて' }
          ]
        });

        document.getElementById('output').textContent =
          res.message?.content || '⚠️ 出力なし';
      };
    });
  </script>
</body>
</html>
